<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluaci√≥n Cognitiva Integral - CO‚Ä¢RA</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: radial-gradient(circle at center, #3498db, #2980b9);
            color: #ffffff;
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(0,0,0,0.9);
            border-radius: 25px;
            padding: 40px;
            border: 3px solid #3498db;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .title {
            color: #3498db;
            font-size: 2.2rem;
            margin-bottom: 15px;
        }
        .cognitive-area {
            background: rgba(52, 152, 219, 0.1);
            border: 2px solid #3498db;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            display: none;
        }
        .cognitive-area.active {
            display: block;
            animation: areaIn 0.8s ease-out;
        }
        @keyframes areaIn {
            from { opacity: 0; transform: translateY(20px); }\
            to { opacity: 1; transform: translateY(0); }
        }
        .area-title {
            color: #3498db;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        .cognitive-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 25px 0;
            background: rgba(0,0,0,0.8);
            border-radius: 15px;
            padding: 20px;
        }
        .cognitive-metric {
            text-align: center;
            padding: 15px;
            background: rgba(52, 152, 219, 0.2);
            border-radius: 10px;
            border: 1px solid #3498db;
        }
        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }
        .metric-label {
            font-size: 0.9rem;
            color: #74b9ff;
        }
        .test-question {
            background: rgba(0,0,0,0.6);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 4px solid #74b9ff;
        }
        .question-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .test-options {
            display: grid;
            gap: 12px;
        }
        .test-option {
            background: rgba(116, 185, 255, 0.2);
            border: 2px solid #74b9ff;
            color: #ffffff;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        .test-option:hover {
            background: rgba(52, 152, 219, 0.3);
            border-color: #3498db;
            transform: translateX(5px);
        }
        .test-option.selected {
            background: rgba(52, 152, 219, 0.5);
            border-color: #ffffff;
        }
        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
            max-width: 300px;
        }
        .pattern-cell {
            width: 80px;
            height: 80px;
            border: 2px solid #74b9ff;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            background: rgba(52, 152, 219, 0.1);
            cursor: pointer;
            transition: all 0.3s;
        }
        .pattern-cell:hover {
            background: rgba(52, 152, 219, 0.3);
        }
        .pattern-cell.selected {
            background: rgba(52, 152, 219, 0.5);
            border-color: #ffffff;
        }
        .creativity-input {
            width: 100%;
            min-height: 120px;
            background: rgba(0,0,0,0.6);
            border: 2px solid #74b9ff;
            border-radius: 10px;
            color: #ffffff;
            padding: 15px;
            font-size: 1rem;
            resize: vertical;
        }
        .timer {
            background: rgba(231, 76, 60, 0.2);
            border: 2px solid #e74c3c;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            margin-bottom: 20px;
        }
        .timer-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #e74c3c;
        }
        .results-container {
            display: none;
            background: rgba(0,0,0,0.95);
            border: 3px solid #3498db;
            border-radius: 25px;
            padding: 40px;
            margin-top: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üß† Evaluaci√≥n Cognitiva Integral CO‚Ä¢RA</h1>
            <p style="color: #74b9ff; margin-bottom: 20px;">
                Evaluaci√≥n comprehensiva de capacidades cognitivas: inteligencias m√∫ltiples, razonamiento l√≥gico y creatividad
            </p>
        </div>

        <div class="cognitive-dashboard" id="cognitiveDashboard">
            <div class="cognitive-metric">
                <div class="metric-value" id="logicalScore">0</div>
                <div class="metric-label">L√≥gico-Matem√°tico</div>
            </div>
            <div class="cognitive-metric">
                <div class="metric-value" id="linguisticScore">0</div>
                <div class="metric-label">Ling√º√≠stico</div>
            </div>
            <div class="cognitive-metric">
                <div class="metric-value" id="spatialScore">0</div>
                <div class="metric-label">Espacial</div>
            </div>
            <div class="cognitive-metric">
                <div class="metric-value" id="creativityScore">0</div>
                <div class="metric-label">Creatividad</div>
            </div>
            <div class="cognitive-metric">
                <div class="metric-value" id="reasoningScore">0</div>
                <div class="metric-label">Razonamiento</div>
            </div>
            <div class="cognitive-metric">
                <div class="metric-value" id="overallIQ">0</div>
                <div class="metric-label">CI Estimado</div>
            </div>
        </div>

        <!-- Test 1: Inteligencia L√≥gico-Matem√°tica -->
        <div class="cognitive-area active" id="area1">
            <h2 class="area-title">Test 1: Inteligencia L√≥gico-Matem√°tica</h2>
            <div class="timer">
                <div class="timer-value" id="timer1">02:00</div>
                <div>Tiempo restante</div>
            </div>
            <div class="test-question">
                <div class="question-text">
                    Si 2x + 5 = 17, ¬øcu√°l es el valor de 4x + 3?
                </div>
                <div class="test-options">
                    <div class="test-option" onclick="selectCognitive(1, 1)" data-score="100">27</div>
                    <div class="test-option" onclick="selectCognitive(1, 2)" data-score="0">23</div>
                    <div class="test-option" onclick="selectCognitive(1, 3)" data-score="0">31</div>
                    <div class="test-option" onclick="selectCognitive(1, 4)" data-score="0">19</div>
                </div>
            </div>
        </div>

        <!-- Test 2: Inteligencia Ling√º√≠stica -->
        <div class="cognitive-area" id="area2">
            <h2 class="area-title">Test 2: Inteligencia Ling√º√≠stica</h2>
            <div class="timer">
                <div class="timer-value" id="timer2">01:30</div>
                <div>Tiempo restante</div>
            </div>
            <div class="test-question">
                <div class="question-text">
                    ¬øCu√°l es el sin√≥nimo m√°s preciso de "perspicaz"?
                </div>
                <div class="test-options">
                    <div class="test-option" onclick="selectCognitive(2, 1)" data-score="100">Astuto</div>
                    <div class="test-option" onclick="selectCognitive(2, 2)" data-score="0">R√°pido</div>
                    <div class="test-option" onclick="selectCognitive(2, 3)" data-score="0">Inteligente</div>
                    <div class="test-option" onclick="selectCognitive(2, 4)" data-score="0">Observador</div>
                </div>
            </div>
        </div>

        <!-- Test 3: Razonamiento Espacial (Matrices de Raven) -->
        <div class="cognitive-area" id="area3">
            <h2 class="area-title">Test 3: Razonamiento Espacial (Matrices de Raven)</h2>
            <div class="timer">
                <div class="timer-value" id="timer3">03:00</div>
                <div>Tiempo restante</div>
            </div>
            <div class="test-question">
                <div class="question-text">
                    Completa el patr√≥n seleccionando la figura que falta:
                </div>
                <div class="pattern-grid">
                    <div class="pattern-cell">‚óè</div>
                    <div class="pattern-cell">‚óè‚óè</div>
                    <div class="pattern-cell">‚óè‚óè‚óè</div>
                    <div class="pattern-cell">‚óã</div>
                    <div class="pattern-cell">‚óã‚óã</div>
                    <div class="pattern-cell">?</div>
                </div>
                <div class="test-options">
                    <div class="test-option" onclick="selectCognitive(3, 1)" data-score="100">‚óã‚óã‚óã</div>
                    <div class="test-option" onclick="selectCognitive(3, 2)" data-score="0">‚óã‚óã</div>
                    <div class="test-option" onclick="selectCognitive(3, 3)" data-score="0">‚óè‚óã‚óè</div>
                    <div class="test-option" onclick="selectCognitive(3, 4)" data-score="0">‚óã‚óè‚óã</div>
                </div>
            </div>
        </div>

        <!-- Test 4: Creatividad (Torrance) -->
        <div class="cognitive-area" id="area4">
            <h2 class="area-title">Test 4: Creatividad (Torrance)</h2>
            <div class="timer">
                <div class="timer-value" id="timer4">05:00</div>
                <div>Tiempo restante</div>
            </div>
            <div class="test-question">
                <div class="question-text">
                    Enumera todos los usos posibles que se te ocurran para un clip (sujetapapeles). S√© creativo y original:
                </div>
                <textarea class="creativity-input" id="creativityInput" placeholder="Escribe aqu√≠ todos los usos creativos que se te ocurran..."></textarea>
            </div>
        </div>

        <!-- Test 5: Razonamiento Abstracto -->
        <div class="cognitive-area" id="area5">
            <h2 class="area-title">Test 5: Razonamiento Abstracto</h2>
            <div class="timer">
                <div class="timer-value" id="timer5">02:30</div>
                <div>Tiempo restante</div>
            </div>
            <div class="test-question">
                <div class="question-text">
                    En una secuencia donde A=1, B=4, C=9, D=16... ¬øcu√°l ser√≠a el valor de F?
                </div>
                <div class="test-options">
                    <div class="test-option" onclick="selectCognitive(5, 1)" data-score="100">36</div>
                    <div class="test-option" onclick="selectCognitive(5, 2)" data-score="0">25</div>
                    <div class="test-option" onclick="selectCognitive(5, 3)" data-score="0">30</div>
                    <div class="test-option" onclick="selectCognitive(5, 4)" data-score="0">32</div>
                </div>
            </div>
        </div>

        <div class="results-container" id="resultsContainer">
            <h2 style="color: #3498db; margin-bottom: 25px;">üß† Evaluaci√≥n Cognitiva Completada</h2>
            <div id="cognitiveResults"></div>
        </div>
    </div>

    <script>
        let currentArea = 1;
        let cognitiveScores = {logical: 0, linguistic: 0, spatial: 0, creativity: 0, reasoning: 0};
        let cognitiveResponses = {};
        let timers = {};
        let timeRemaining = {1: 120, 2: 90, 3: 180, 4: 300, 5: 150};

        function startTimer(area) {
            timers[area] = setInterval(() => {
                timeRemaining[area]--;
                const minutes = Math.floor(timeRemaining[area] / 60);
                const seconds = timeRemaining[area] % 60;
                document.getElementById(`timer${area}`).textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeRemaining[area] <= 0) {
                    clearInterval(timers[area]);
                    if (area === 4) {
                        evaluateCreativity();
                    }
                    nextArea();
                }
            }, 1000);
        }

        function selectCognitive(area, option) {
            const options = document.querySelectorAll(`#area${area} .test-option`);
            options.forEach(opt => opt.classList.remove('selected'));
            
            const selectedOption = event.target;
            selectedOption.classList.add('selected');
            
            const score = parseInt(selectedOption.dataset.score);
            cognitiveResponses[area] = { option, score };
            
            // Actualizar dashboard
            const metrics = ['logical', 'linguistic', 'spatial', 'creativity', 'reasoning'];
            const metricIds = ['logicalScore', 'linguisticScore', 'spatialScore', 'creativityScore', 'reasoningScore'];
            
            if (area <= 5 && area !== 4) {
                cognitiveScores[metrics[area-1]] = score;
                document.getElementById(metricIds[area-1]).textContent = score;
            }
            
            clearInterval(timers[area]);
            setTimeout(() => {
                nextArea();
            }, 1000);
        }

        function evaluateCreativity() {
            const input = document.getElementById('creativityInput').value;
            const uses = input.split(/[,\n]/).filter(use => use.trim().length > 0);
            const uniqueUses = [...new Set(uses.map(use => use.trim().toLowerCase()))];
            
            let creativityScore = Math.min(100, uniqueUses.length * 10);
            
            // Bonus por originalidad
            const originalUses = uniqueUses.filter(use => 
                !['sujetar papeles', 'clip', 'papel', 'sujetar'].some(common => use.includes(common))
            );
            creativityScore += originalUses.length * 5;
            creativityScore = Math.min(100, creativityScore);
            
            cognitiveScores.creativity = creativityScore;
            document.getElementById('creativityScore').textContent = creativityScore;
        }

        function nextArea() {
            document.getElementById(`area${currentArea}`).classList.remove('active');
            currentArea++;
            
            if (currentArea <= 5) {
                setTimeout(() => {
                    document.getElementById(`area${currentArea}`).classList.add('active');
                    startTimer(currentArea);
                }, 500);
            } else {
                setTimeout(() => {
                    showResults();
                }, 1000);
            }
        }

        function showResults() {
            document.querySelectorAll('.cognitive-area').forEach(area => area.style.display = 'none');
            
            const overallIQ = calculateIQ();
            const cognitiveProfile = determineCognitiveProfile(overallIQ, cognitiveScores);
            
            document.getElementById('overallIQ').textContent = overallIQ;
            document.getElementById('cognitiveResults').innerHTML = generateCognitiveResults(cognitiveProfile, overallIQ);
            document.getElementById('resultsContainer').style.display = 'block';
        }

        function calculateIQ() {
            const scores = Object.values(cognitiveScores);
            const average = scores.reduce((a, b) => a + b, 0) / scores.length;
            return Math.round(85 + (average / 100) * 45); // Escala 85-130
        }

        function determineCognitiveProfile(iq, scores) {
            if (iq >= 120) {
                return {
                    level: 'SUPERDOTADO',
                    color: '#9b59b6',
                    description: 'Capacidades cognitivas excepcionales. Ideal para amplificaci√≥n avanzada.',
                    amplification: 'Protocolo de amplificaci√≥n acelerada sin restricciones',
                    potential: 'Potencial para liderazgo cognitivo en CO‚Ä¢RA',
                    nextStep: 'evaluacion_social.html',
                    buttonText: 'üë• EVALUACI√ìN SOCIAL'
                };
            } else if (iq >= 110) {
                return {
                    level: 'SUPERIOR',
                    color: '#3498db',
                    description: 'Capacidades cognitivas superiores al promedio.',
                    amplification: 'Protocolo est√°ndar de amplificaci√≥n cognitiva',
                    potential: 'Excelente candidato para amplificaci√≥n CO‚Ä¢RA',
                    nextStep: 'evaluacion_social.html',
                    buttonText: 'üë• EVALUACI√ìN SOCIAL'
                };
            } else if (iq >= 90) {
                return {
                    level: 'PROMEDIO ALTO',
                    color: '#2ecc71',
                    description: 'Capacidades cognitivas s√≥lidas con potencial de desarrollo.',
                    amplification: 'Protocolo gradual con entrenamiento cognitivo',
                    potential: 'Buen candidato con preparaci√≥n previa',
                    nextStep: 'evaluacion_social.html',
                    buttonText: 'üë• EVALUACI√ìN SOCIAL'
                };
            } else {
                return {
                    level: 'REQUIERE DESARROLLO',
                    color: '#f39c12',
                    description: 'Necesario desarrollo cognitivo antes de amplificaci√≥n.',
                    amplification: 'Programa de entrenamiento cognitivo intensivo',
                    potential: 'Potencial con preparaci√≥n adecuada',
                    nextStep: 'entrenamiento_cognitivo.html',
                    buttonText: 'üéØ ENTRENAMIENTO COGNITIVO'
                };
            }
        }

        function generateCognitiveResults(profile, iq) {
            return `
                <div style="background: rgba(52, 152, 219, 0.2); padding: 25px; border-radius: 15px; margin: 20px 0;">
                    <h3 style="color: ${profile.color}; margin-bottom: 15px;">
                        Perfil Cognitivo: ${profile.level}
                    </h3>
                    <p style="margin-bottom: 15px; line-height: 1.6;">
                        ${profile.description}
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin: 20px 0;">
                        <div style="background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="color: #3498db; font-weight: bold;">L√≥gico-Mat.</div>
                            <div style="font-size: 1.3rem; color: white;">${cognitiveScores.logical}</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="color: #3498db; font-weight: bold;">Ling√º√≠stico</div>
                            <div style="font-size: 1.3rem; color: white;">${cognitiveScores.linguistic}</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="color: #3498db; font-weight: bold;">Espacial</div>
                            <div style="font-size: 1.3rem; color: white;">${cognitiveScores.spatial}</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="color: #3498db; font-weight: bold;">Creatividad</div>
                            <div style="font-size: 1.3rem; color: white;">${cognitiveScores.creativity}</div>
                        </div>
                        <div style="background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="color: #3498db; font-weight: bold;">Razonamiento</div>
                            <div style="font-size: 1.3rem; color: white;">${cognitiveScores.reasoning}</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(0,0,0,0.6); padding: 20px; border-radius: 15px; margin: 20px 0;">
                        <h4 style="color: #3498db; margin-bottom: 10px;">üöÄ Protocolo de Amplificaci√≥n:</h4>
                        <p style="margin-bottom: 10px;">${profile.amplification}</p>
                        
                        <h4 style="color: #3498db; margin-bottom: 10px;">üéØ Potencial CO‚Ä¢RA:</h4>
                        <p>${profile.potential}</p>
                    </div>
                    
                    <div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>Coeficiente Intelectual Estimado:</strong> ${iq} (Escala Stanford-Binet)
                    </div>
                </div>
                
                <div style="text-align: center; margin: 30px 0;">
                    <a href="${profile.nextStep}" style="
                        background: linear-gradient(135deg, ${profile.color}, #74b9ff);
                        color: white;
                        padding: 20px 40px;
                        border-radius: 25px;
                        text-decoration: none;
                        font-weight: bold;
                        font-size: 1.2rem;
                        display: inline-block;
                    ">${profile.buttonText}</a>
                    
                    <p style="margin-top: 15px; color: #74b9ff; font-size: 0.9rem;">
                        Tu perfil cognitivo determina el protocolo de amplificaci√≥n m√°s efectivo
                    </p>
                </div>
            `;
        }

        // Iniciar primer timer
        startTimer(1);
    </script>
    <script src="token_manager.js"></script>
    <script src="analytics_engine.js"></script>
</body>
</html>