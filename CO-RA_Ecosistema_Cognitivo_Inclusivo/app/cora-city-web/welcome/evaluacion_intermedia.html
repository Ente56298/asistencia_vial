<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluaci√≥n Intermedia - CO‚Ä¢RA</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 850px;
            margin: 0 auto;
            background: rgba(0,0,0,0.85);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid #667eea;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .title {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #a8b3f0;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        .section {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            display: none;
        }
        .section.active {
            display: block;
            animation: slideIn 0.6s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .section-title {
            color: #667eea;
            font-size: 1.4rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .question {
            margin-bottom: 25px;
            display: none;
        }
        .question.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .question-text {
            font-size: 1.1rem;
            color: #ffffff;
            margin-bottom: 15px;
            line-height: 1.6;
            background: rgba(168, 179, 240, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        .options {
            display: grid;
            gap: 12px;
        }
        .option {
            background: rgba(102, 126, 234, 0.2);
            border: 2px solid #667eea;
            color: #ffffff;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        .option:hover {
            background: rgba(102, 126, 234, 0.4);
            transform: translateX(5px);
        }
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(102, 126, 234, 0.3);
            border-radius: 3px;
            margin-bottom: 25px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 3px;
            width: 0%;
            transition: width 0.5s ease;
        }
        .continue-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 20px;
            display: none;
        }
        .continue-btn.show {
            display: inline-block;
            animation: slideUp 0.5s ease-out;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .result {
            display: none;
            text-align: center;
            background: rgba(0,0,0,0.9);
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
        }
        .profile-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .profile-card {
            background: rgba(102, 126, 234, 0.2);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #667eea;
        }
        .profile-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #a8b3f0;
        }
        .recommendation {
            background: rgba(46, 204, 113, 0.2);
            border: 2px solid #2ECC71;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üß† Evaluaci√≥n Intermedia CO‚Ä¢RA</h1>
            <p class="subtitle">Para usuarios con conocimiento moderado de autoconocimiento</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- Secci√≥n 1: Autoconocimiento Intermedio -->
        <div class="section active" data-section="1">
            <div class="section-title">
                üîç Autoconocimiento Intermedio
            </div>
            
            <div class="question active" data-question="1">
                <div class="question-text">
                    ¬øPuedes identificar patrones espec√≠ficos en tu comportamiento que se repiten en diferentes situaciones?
                </div>
                <div class="options">
                    <button class="option" data-value="basic" data-score="2">Identifico algunos patrones b√°sicos</button>
                    <button class="option" data-value="clear" data-score="3">Veo patrones claros y puedo predecir mis reacciones</button>
                    <button class="option" data-value="deep" data-score="4">Comprendo patrones profundos y sus or√≠genes</button>
                    <button class="option" data-value="transform" data-score="5">Puedo transformar conscientemente estos patrones</button>
                </div>
            </div>

            <div class="question" data-question="2">
                <div class="question-text">
                    Cuando experimentas emociones intensas, ¬øqu√© nivel de consciencia tienes sobre ellas?
                </div>
                <div class="options">
                    <button class="option" data-value="reactive" data-score="2">Me doy cuenta despu√©s de reaccionar</button>
                    <button class="option" data-value="aware" data-score="3">Soy consciente mientras las experimento</button>
                    <button class="option" data-value="observe" data-score="4">Puedo observarlas sin ser arrastrado por ellas</button>
                    <button class="option" data-value="integrate" data-score="5">Las integro como informaci√≥n valiosa</button>
                </div>
            </div>

            <div class="question" data-question="3">
                <div class="question-text">
                    ¬øC√≥mo describes tu relaci√≥n con tus pensamientos?
                </div>
                <div class="options">
                    <button class="option" data-value="identified" data-score="2">Generalmente me identifico con mis pensamientos</button>
                    <button class="option" data-value="separate" data-score="3">A veces puedo separarme de ellos</button>
                    <button class="option" data-value="observer" data-score="4">Puedo observarlos como un testigo</button>
                    <button class="option" data-value="director" data-score="5">Dirijo conscientemente mi proceso de pensamiento</button>
                </div>
            </div>
        </div>

        <!-- Secci√≥n 2: Procesamiento Cognitivo -->
        <div class="section" data-section="2">
            <div class="section-title">
                ‚ö° Procesamiento Cognitivo
            </div>
            
            <div class="question active" data-question="4">
                <div class="question-text">
                    Cuando enfrentas un problema complejo, ¬øcu√°l es tu enfoque natural?
                </div>
                <div class="options">
                    <button class="option" data-value="linear" data-score="2">An√°lisis paso a paso y l√≥gico</button>
                    <button class="option" data-value="multiple" data-score="3">Considero m√∫ltiples perspectivas</button>
                    <button class="option" data-value="systemic" data-score="4">Veo conexiones sist√©micas y patrones</button>
                    <button class="option" data-value="intuitive" data-score="5">Integro l√≥gica e intuici√≥n fluidamente</button>
                </div>
            </div>

            <div class="question" data-question="5">
                <div class="question-text">
                    ¬øC√≥mo manejas la informaci√≥n contradictoria o ambigua?
                </div>
                <div class="options">
                    <button class="option" data-value="uncomfortable" data-score="2">Me genera incomodidad, busco claridad</button>
                    <button class="option" data-value="tolerate" data-score="3">Puedo tolerarla temporalmente</button>
                    <button class="option" data-value="explore" data-score="4">La exploro como fuente de aprendizaje</button>
                    <button class="option" data-value="synthesize" data-score="5">Sintetizo nuevas comprensiones desde la paradoja</button>
                </div>
            </div>

            <div class="question" data-question="6">
                <div class="question-text">
                    ¬øQu√© tan consciente eres de tus procesos de toma de decisiones?
                </div>
                <div class="options">
                    <button class="option" data-value="automatic" data-score="2">Muchas decisiones son autom√°ticas</button>
                    <button class="option" data-value="deliberate" data-score="3">Soy deliberado en decisiones importantes</button>
                    <button class="option" data-value="metacognitive" data-score="4">Observo c√≥mo tomo decisiones</button>
                    <button class="option" data-value="optimized" data-score="5">Optimizo conscientemente mi proceso decisorio</button>
                </div>
            </div>
        </div>

        <!-- Secci√≥n 3: Motivaci√≥n y Prop√≥sito -->
        <div class="section" data-section="3">
            <div class="section-title">
                üéØ Motivaci√≥n y Prop√≥sito
            </div>
            
            <div class="question active" data-question="7">
                <div class="question-text">
                    ¬øQu√© tan claro tienes tu prop√≥sito o direcci√≥n en la vida?
                </div>
                <div class="options">
                    <button class="option" data-value="searching" data-score="2">Estoy buscando mi prop√≥sito</button>
                    <button class="option" data-value="emerging" data-score="3">Tengo una direcci√≥n general emergente</button>
                    <button class="option" data-value="clear" data-score="4">Tengo claridad sobre mi prop√≥sito</button>
                    <button class="option" data-value="aligned" data-score="5">Vivo alineado con mi prop√≥sito profundo</button>
                </div>
            </div>

            <div class="question" data-question="8">
                <div class="question-text">
                    ¬øC√≥mo te relacionas con el crecimiento personal?
                </div>
                <div class="options">
                    <button class="option" data-value="occasional" data-score="2">Es algo que hago ocasionalmente</button>
                    <button class="option" data-value="regular" data-score="3">Es parte regular de mi vida</button>
                    <button class="option" data-value="priority" data-score="4">Es una prioridad constante</button>
                    <button class="option" data-value="essence" data-score="5">Es la esencia de mi existencia</button>
                </div>
            </div>

            <div class="question" data-question="9">
                <div class="question-text">
                    ¬øQu√© te motiva m√°s profundamente?
                </div>
                <div class="options">
                    <button class="option" data-value="achievement" data-score="2">Lograr metas personales</button>
                    <button class="option" data-value="contribution" data-score="3">Contribuir a algo mayor que yo</button>
                    <button class="option" data-value="understanding" data-score="4">Comprender la naturaleza de la realidad</button>
                    <button class="option" data-value="evolution" data-score="5">Participar en la evoluci√≥n de la consciencia</button>
                </div>
            </div>
        </div>

        <!-- Secci√≥n 4: Preparaci√≥n para CO‚Ä¢RA -->
        <div class="section" data-section="4">
            <div class="section-title">
                üöÄ Preparaci√≥n para Amplificaci√≥n Cognitiva
            </div>
            
            <div class="question active" data-question="10">
                <div class="question-text">
                    ¬øC√≥mo te sientes ante la posibilidad de expandir significativamente tu capacidad cognitiva?
                </div>
                <div class="options">
                    <button class="option" data-value="curious" data-score="2">Curioso pero con algunas reservas</button>
                    <button class="option" data-value="excited" data-score="3">Emocionado por las posibilidades</button>
                    <button class="option" data-value="ready" data-score="4">Preparado y comprometido</button>
                    <button class="option" data-value="destined" data-score="5">Siento que es mi destino natural</button>
                </div>
            </div>

            <div class="question" data-question="11">
                <div class="question-text">
                    ¬øQu√© esperas obtener de la experiencia CO‚Ä¢RA?
                </div>
                <div class="options">
                    <button class="option" data-value="improvement" data-score="2">Mejoras en mi capacidad de pensamiento</button>
                    <button class="option" data-value="integration" data-score="3">Mayor integraci√≥n de mis capacidades</button>
                    <button class="option" data-value="transcendence" data-score="4">Trascender mis limitaciones actuales</button>
                    <button class="option" data-value="transformation" data-score="5">Transformaci√≥n fundamental de mi ser</button>
                </div>
            </div>

            <div class="question" data-question="12">
                <div class="question-text">
                    ¬øC√≥mo manejas actualmente los desaf√≠os que exceden tu capacidad individual?
                </div>
                <div class="options">
                    <button class="option" data-value="struggle" data-score="2">Lucho hasta encontrar una soluci√≥n</button>
                    <button class="option" data-value="seek" data-score="3">Busco ayuda y recursos externos</button>
                    <button class="option" data-value="collaborate" data-score="4">Colaboro para crear soluciones emergentes</button>
                    <button class="option" data-value="transcend" data-score="5">Los uso como catalizadores para trascender l√≠mites</button>
                </div>
            </div>
        </div>

        <button class="continue-btn" id="continueBtn" onclick="nextQuestion()">Continuar ‚Üí</button>

        <div class="result" id="result">
            <h2 style="color: #667eea; margin-bottom: 20px;">Evaluaci√≥n Intermedia Completada</h2>
            <div id="profileAnalysis"></div>
            <div class="profile-grid" id="profileGrid"></div>
            <div id="recommendation"></div>
        </div>
    </div>

    <script>
        let currentSection = 1;
        let currentQuestion = 1;
        let totalScore = 0;
        let responses = {};
        let sectionScores = {1: 0, 2: 0, 3: 0, 4: 0};
        
        function selectOption(element) {
            const score = parseInt(element.dataset.score);
            const value = element.dataset.value;
            
            totalScore += score;
            responses[currentQuestion] = {value, score};
            sectionScores[currentSection] += score;
            
            // Marcar selecci√≥n
            document.querySelectorAll('.option').forEach(opt => opt.style.background = 'rgba(102, 126, 234, 0.2)');
            element.style.background = 'rgba(102, 126, 234, 0.6)';
            
            // Mostrar bot√≥n continuar
            document.getElementById('continueBtn').classList.add('show');
        }
        
        function nextQuestion() {
            // Ocultar pregunta actual
            document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('active');
            
            currentQuestion++;
            
            // Actualizar progreso
            const progress = ((currentQuestion - 1) / 12) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Verificar si hay m√°s preguntas en la secci√≥n actual
            const nextQ = document.querySelector(`[data-question="${currentQuestion}"]`);
            
            if (nextQ && nextQ.closest(`[data-section="${currentSection}"]`)) {
                // Mostrar siguiente pregunta en la misma secci√≥n
                setTimeout(() => {
                    nextQ.classList.add('active');
                    document.getElementById('continueBtn').classList.remove('show');
                }, 300);
            } else {
                // Cambiar a siguiente secci√≥n
                nextSection();
            }
        }
        
        function nextSection() {
            // Ocultar secci√≥n actual
            document.querySelector(`[data-section="${currentSection}"]`).classList.remove('active');
            
            currentSection++;
            
            if (currentSection <= 4) {
                // Mostrar siguiente secci√≥n
                setTimeout(() => {
                    const nextSec = document.querySelector(`[data-section="${currentSection}"]`);
                    nextSec.classList.add('active');
                    
                    const firstQuestion = nextSec.querySelector('.question');
                    firstQuestion.classList.add('active');
                    
                    document.getElementById('continueBtn').classList.remove('show');
                }, 500);
            } else {
                // Mostrar resultado final
                setTimeout(showResult, 1000);
            }
        }
        
        function showResult() {
            document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
            document.getElementById('continueBtn').style.display = 'none';
            
            // Analizar perfil
            const profile = analyzeProfile();
            
            document.getElementById('profileAnalysis').innerHTML = `
                <h3 style="color: #667eea; margin-bottom: 15px;">${profile.type}</h3>
                <p style="line-height: 1.6; margin-bottom: 20px;">${profile.description}</p>
            `;
            
            document.getElementById('profileGrid').innerHTML = `
                <div class="profile-card">
                    <div>Autoconocimiento</div>
                    <div class="profile-value">${Math.round((sectionScores[1] / 15) * 100)}%</div>
                </div>
                <div class="profile-card">
                    <div>Procesamiento Cognitivo</div>
                    <div class="profile-value">${Math.round((sectionScores[2] / 15) * 100)}%</div>
                </div>
                <div class="profile-card">
                    <div>Motivaci√≥n y Prop√≥sito</div>
                    <div class="profile-value">${Math.round((sectionScores[3] / 15) * 100)}%</div>
                </div>
                <div class="profile-card">
                    <div>Preparaci√≥n CO‚Ä¢RA</div>
                    <div class="profile-value">${Math.round((sectionScores[4] / 15) * 100)}%</div>
                </div>
                <div class="profile-card">
                    <div>Puntuaci√≥n Total</div>
                    <div class="profile-value">${totalScore}/60</div>
                </div>
            `;
            
            document.getElementById('recommendation').innerHTML = `
                <div class="recommendation">
                    <h4 style="color: #2ECC71; margin-bottom: 15px;">üéØ Tu Camino en CO‚Ä¢RA</h4>
                    <p>${profile.recommendation}</p>
                    <p style="margin-top: 15px; color: #667eea;"><strong>Siguiente paso:</strong> ${profile.nextStep}</p>
                    <a href="${profile.nextUrl}" class="continue-btn show" style="margin-top: 15px;">${profile.buttonText}</a>
                </div>
            `;
            
            document.getElementById('result').style.display = 'block';
        }
        
        function analyzeProfile() {
            const avgScore = totalScore / 12;
            
            if (avgScore >= 4.5) {
                return {
                    type: "EXPLORADOR COGNITIVO AVANZADO",
                    description: "Demuestras un nivel excepcional de autoconocimiento y preparaci√≥n cognitiva. Est√°s listo para experiencias profundas de amplificaci√≥n.",
                    recommendation: "Tu perfil indica preparaci√≥n para t√©cnicas avanzadas de amplificaci√≥n cognitiva. Puedes acceder a evaluaciones m√°s profundas y sistemas especializados.",
                    nextStep: "Evaluaci√≥n psicol√≥gica profunda para acceso completo",
                    nextUrl: "evaluacion_completa.html",
                    buttonText: "üß† BATER√çA COMPLETA"
                };
            } else if (avgScore >= 3.5) {
                return {
                    type: "BUSCADOR COGNITIVO PREPARADO",
                    description: "Tienes una base s√≥lida de autoconocimiento y motivaci√≥n clara. Est√°s preparado para la mayor√≠a de experiencias CO‚Ä¢RA.",
                    recommendation: "Puedes acceder a sistemas intermedios y avanzados de CO‚Ä¢RA. Te beneficiar√≠as de una evaluaci√≥n de salud mental para personalizar tu experiencia.",
                    nextStep: "Evaluaci√≥n MHQ para optimizar tu experiencia",
                    nextUrl: "evaluacion_completa.html",
                    buttonText: "üìä BATER√çA PSICOL√ìGICA"
                };
            } else if (avgScore >= 2.5) {
                return {
                    type: "EXPLORADOR EN DESARROLLO",
                    description: "Muestras potencial significativo con √°reas espec√≠ficas para desarrollar. CO‚Ä¢RA puede ayudarte a fortalecer tu base cognitiva.",
                    recommendation: "Acceso a sistemas b√°sicos e intermedios de CO‚Ä¢RA con enfoque en desarrollo de capacidades identificadas como √°reas de crecimiento.",
                    nextStep: "Exploraci√≥n directa de CO‚Ä¢RA City con orientaci√≥n",
                    nextUrl: "conexion_simbolica.html",
                    buttonText: "üîó ESTABLECER CONEXI√ìN"
                };
            } else {
                return {
                    type: "BUSCADOR INICIAL",
                    description: "Est√°s en las etapas iniciales de desarrollo cognitivo consciente. CO‚Ä¢RA te proporcionar√° las herramientas fundamentales.",
                    recommendation: "Comenzar con sistemas b√°sicos de CO‚Ä¢RA y herramientas de desarrollo de autoconocimiento antes de avanzar a t√©cnicas m√°s complejas.",
                    nextStep: "Desarrollo guiado en CO‚Ä¢RA City",
                    nextUrl: "conexion_simbolica.html",
                    buttonText: "üîó ESTABLECER CONEXI√ìN"
                };
            }
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    selectOption(this);
                });
            });
        });
    </script>
    <script src="token_manager.js"></script>
    <script src="analytics_engine.js"></script>
    <script>
        // Integraci√≥n con motor de an√°lisis para evaluaci√≥n intermedia
        const originalSelectOption = selectOption;
        selectOption = function(element) {
            if (window.coraAnalytics) {
                window.coraAnalytics.sessionData.interactionData.push({
                    type: 'intermediate_response',
                    section: currentSection,
                    question: currentQuestion,
                    response: element.dataset.value,
                    score: element.dataset.score,
                    timestamp: Date.now()
                });
            }
            return originalSelectOption(element);
        };
        
        const originalShowResult = showResult;
        showResult = function() {
            if (window.coraAnalytics) {
                window.coraAnalytics.saveAnalysisData();
            }
            return originalShowResult();
        };
    </script>
</body>
</html>